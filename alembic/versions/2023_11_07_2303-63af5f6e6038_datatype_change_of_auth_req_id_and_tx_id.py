"""datatype change of auth_req_id and tx_id

Revision ID: 63af5f6e6038
Revises: 9e9b8d2fe0fd
Create Date: 2023-11-07 23:03:26.138332

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = "63af5f6e6038"
down_revision = "9e9b8d2fe0fd"
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###

    op.alter_column(
        "subscriptions",
        "auth_req_id",
        existing_type=sa.UUID(),
        server_default=None,
        type_=sa.String(),
        existing_nullable=True,
    )
    op.add_column("transactions", sa.Column("tx_id", sa.String(), nullable=True))
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_column("transactions", "tx_id")
    op.alter_column(
        "subscriptions",
        "auth_req_id",
        existing_type=sa.String(),
        server_default=sa.text("gen_random_uuid()"),
        type_=sa.UUID(),
        existing_nullable=True,
    )

    # ### end Alembic commands ###
