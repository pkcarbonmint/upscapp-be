"""changes in purchase installments to take revised payments

Revision ID: 115bac861fd9
Revises: 6c7a90094334
Create Date: 2025-03-12 10:32:25.011202

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision = '115bac861fd9'
down_revision = '6c7a90094334'
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.alter_column('plantasks', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('plantaskusers', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.add_column('purchaseinstallments', sa.Column('is_original', sa.Boolean(), nullable=True))
    op.add_column('purchaseinstallments', sa.Column('is_deleted', sa.Boolean(), nullable=True))
    op.add_column('purchaseinstallments', sa.Column('original_installment_date', sa.DateTime(timezone=True), nullable=True))
    op.add_column('purchaseinstallments', sa.Column('original_installment_amount', sa.Integer(), nullable=True))
    op.add_column('purchaseinstallments', sa.Column('notes', postgresql.ARRAY(sa.JSON()), nullable=True))
    op.alter_column('studyplans', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('studyplanusers', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('users', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('users', 'free_trial_used',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('users', 'is_external',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.alter_column('users', 'is_external',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('users', 'free_trial_used',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('users', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('studyplanusers', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('studyplans', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.drop_column('purchaseinstallments', 'notes')
    op.drop_column('purchaseinstallments', 'original_installment_amount')
    op.drop_column('purchaseinstallments', 'original_installment_date')
    op.drop_column('purchaseinstallments', 'is_deleted')
    op.drop_column('purchaseinstallments', 'is_original')
    op.alter_column('plantaskusers', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('plantasks', 'is_deleted',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    # ### end Alembic commands ###
